/* 2018-12-14 10:56:58 | 版权所有 火星科技 http://marsgis.cn  【联系我们QQ：516584683，微信：marsgis】 */
var fixGltf=function(r){if(r.extensionsUsed&&r.extensionsUsed.indexOf&&r.extensionsRequired){var e=r.extensionsUsed.indexOf("KHR_technique_webgl");if(-1!=e){var s=r.extensionsRequired.indexOf("KHR_technique_webgl");r.extensionsRequired.splice(s,1,"KHR_techniques_webgl"),r.extensionsUsed.splice(e,1,"KHR_techniques_webgl"),r.extensions=r.extensions||{},r.extensions.KHR_techniques_webgl={},r.extensions.KHR_techniques_webgl.programs=r.programs,r.extensions.KHR_techniques_webgl.shaders=r.shaders,r.extensions.KHR_techniques_webgl.techniques=r.techniques;var u=r.extensions.KHR_techniques_webgl.techniques;r.materials.forEach(function(e,s){r.materials[s].extensions.KHR_technique_webgl.values=r.materials[s].values,r.materials[s].extensions.KHR_techniques_webgl=r.materials[s].extensions.KHR_technique_webgl;var t=r.materials[s].extensions.KHR_techniques_webgl;for(var i in t.values){var n=u[t.technique].uniforms;for(var a in n)if(n[a]===i){t.values[a]=t.values[i],delete t.values[i];break}}}),u.forEach(function(e){for(var s in e.attributes){var t=e.attributes[s];e.attributes[s]=e.parameters[t]}for(var i in e.uniforms){t=e.uniforms[i];e.uniforms[i]=e.parameters[t]}})}}};Object.defineProperties(Cesium.Model.prototype,{_cachedGltf:{set:function(e){this._vtxf_cachedGltf=e,1.5<Cesium.VERSION&&this._vtxf_cachedGltf&&this._vtxf_cachedGltf._gltf&&fixGltf(this._vtxf_cachedGltf._gltf)},get:function(){return this._vtxf_cachedGltf}}});
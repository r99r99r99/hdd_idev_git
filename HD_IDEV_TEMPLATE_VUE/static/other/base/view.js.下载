/* 2018-9-7 21:20:44 | 版权所有 火星科技 http://marsgis.cn  【联系我们QQ：516584683，微信：marsgis】 */
var thisWidget,filePath="data/",photoQYJJ={title:"企业简介",id:1,start:0,data:[]},photoCpjj={title:"企业产品",id:2,start:0,data:[]};function initWidgetView(t){(thisWidget=t).config&&thisWidget.config.style&&$("body").addClass(thisWidget.config.style),showItemView(thisWidget.getData());var e=$(window).height()-100;$("#zpQYJJ").is(":hidden")?$("#zpCPJJ").is(":hidden")?($(".ryglGjRight2").hide(),$(".ryglGjRight1").css("width","100%")):$("#zpCPJJ").height(e):$("#zpCPJJ").is(":hidden")?$("#zpQYJJ").height(e):($("#zpQYJJ").height(e/2),$("#zpCPJJ").height(e/2)),$(".toolsbar-mappic").mCustomScrollbar({theme:"minimal"}),$("#btnSPJK").click(function(){thisWidget.showSPJK()})}function showItemView(t){filePath+=(t.ID||"")+"/",$("#qyNameJC").html(t.JC),$("#qyName").html("名称："+t.NAME),$("#qyLX").html("类型："+t.LX),t.LXDH&&$("#qyLXDH").html("电话："+t.LXDH),t.DZ&&$("#qyDZ").html("地址："+t.DZ),$("#txtQYJJ").html("&nbsp;&nbsp;&nbsp;&nbsp;暂无"),"有"==t.QYJJ&&$.ajax({url:filePath+"about.txt",type:"get",dataType:"text",success:function(t){$("#txtQYJJ").html("&nbsp;&nbsp;&nbsp;&nbsp;"+(t||"暂无")),$("#txtQYJJ").mCustomScrollbar({theme:"minimal"})},error:function(t,e,i){console.log("企业简介文件"+filePath+"about.txt加载失败！")}}),photoQYJJ.data=[];var e=Number(t.QYZP);if(!isNaN(e)&&0<e){for(var i="<ul>",a=0;a<e;a++){i+="<li  onclick='showPhotoQyjj("+a+")'><a><div><img src='"+(o=filePath+"company/"+(a+1)+".jpg")+"'/></div><div></div> </a></li>",photoQYJJ.data.push({pid:a,alt:"",src:o,thumb:o})}i+="</ul>",$("#zpQYJJ").html(i)}else $("#zpQYJJ-Title").hide(),$("#zpQYJJ").hide();photoCpjj.data=[];e=Number(t.CPZP);if(!isNaN(e)&&0<e){for(i="<ul>",a=0;a<e;a++){var o;i+="<li  onclick='showPhotoQycp("+a+")'><a><div><img src='"+(o=filePath+"product/"+(a+1)+".jpg")+"'/></div><div></div> </a></li>",photoCpjj.data.push({pid:a,alt:"",src:o,thumb:o})}i+="</ul>",$("#zpCPJJ").html(i)}else $("#zpCPJJ-Title").hide(),$("#zpCPJJ").hide();var h=$(window).height()-$("#infoExView").height();($("#echartsView").css("height",h+"px"),t.JJ&&0<t.JJ.length)&&echarts.init(document.getElementById("echartsView"),"dark").setOption(getOption1(t.JJ))}function getOption1(t){for(var e=[],i=[],a=[],o=[],s=[0],l=[0],r=[0],h=0;h<t.length;h++){var p=t[h];if(p.ZCZ=Number(p.ZCZ),p.LY=Number(p.LY),p.NSE=Number(p.NSE),e.push(p.NF+"年"),i.push(p.ZCZ),a.push(p.LY),o.push(p.NSE),0<h){var n=t[h-1];0!=p.ZCZ?s.push(Math.round(100*(p.ZCZ-n.ZCZ)/n.ZCZ)):s.push(0),0!=p.LY?l.push(Math.round(100*(p.LY-n.LY)/n.LY)):l.push(0),0!=p.NSE?r.push(Math.round(100*(p.NSE-n.NSE)/n.NSE)):r.push(0)}}return{tooltip:{trigger:"axis",position:function(t,e,i,a,o){return["10%","10%"]},formatter:function(t){var e="";for(var i in t){var a=t[i];if(null!=a&&null!=a.value)if(0!=a.value){if(a.value<1e4)e+="<label style='color:"+a.color+";'>"+a.value+"</label>&nbsp;万元";else{var o=Math.round(a.value/1e3)/10;e+="<label style='color:"+a.color+";'>"+o+"</label>&nbsp;亿元"}if(0<a.dataIndex){var h=100;"总产值"==a.seriesName?h=s[a.dataIndex]:"利润"==a.seriesName?h=l[a.dataIndex]:"纳税额"==a.seriesName&&(h=r[a.dataIndex]),e+="，&nbsp;同比增长<label style='color:"+a.color+";'>"+h+"</label>%<br />"}else e+="<br />"}else e+="无数据<br />"}return e}},toolbox:{top:10,right:10,feature:{magicType:{show:!0,type:["line","bar"]}}},legend:{top:10,left:10,data:["总产值","利润","纳税额"]},xAxis:{data:e,axisLine:{show:!1}},yAxis:{axisLabel:{rotate:60}},series:[{name:"总产值",type:"bar",data:i},{name:"利润",type:"bar",data:a},{name:"纳税额",type:"bar",data:o}]}}function showPhotoQyjj(t){photoQYJJ.start=t||0,layer.photos({photos:photoQYJJ,anim:5,shade:[.5,"#393D49"]})}function showPhotoQycp(t){photoCpjj.start=t||0,layer.photos({photos:photoCpjj,anim:5,shade:[.3,"#393D49"]})}